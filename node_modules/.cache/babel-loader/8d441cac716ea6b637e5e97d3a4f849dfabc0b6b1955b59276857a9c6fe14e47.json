{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Max\\\\Desktop\\\\AS\\\\ad\\\\src\\\\Pages\\\\Asteroids.tsx\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from \"react\";\nimport styles from './Asteroids.module.css';\nimport { getUserKey } from '../utils/getUserKey';\nimport { Header } from \"../Components/Header/Header\";\nimport { AsteroidCard } from \"../Components/AsteroidCard/AsteroidCard\";\nimport { AsteroidContext } from \"../Components/AsteroidCard/AsteroidCardContent/AsteroidContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Asteroids = () => {\n  _s();\n  const [asteroids, setAsteroids] = useState([]);\n  const context = useContext(AsteroidContext);\n  if (!context) {\n    throw new Error(\"Asteroids must be used within AsteroidContextProvider\");\n  }\n  const {\n    onlyDangerous,\n    setOnlyDangerous,\n    setDistanceMode\n  } = context;\n  useEffect(() => {\n    const fetchAsteroids = async () => {\n      try {\n        const url = `https://api.nasa.gov/neo/rest/v1/feed?api_key=${getUserKey()}`;\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        const data = await response.json();\n        const rawAsteroids = [];\n        for (const date in data.near_earth_objects) {\n          rawAsteroids.push(...data.near_earth_objects[date]);\n        }\n        const parsedAsteroids = rawAsteroids.map(item => {\n          var _item$close_approach_, _item$estimated_diame, _closeApproach$miss_d, _closeApproach$miss_d2;\n          const closeApproach = (_item$close_approach_ = item.close_approach_data) === null || _item$close_approach_ === void 0 ? void 0 : _item$close_approach_[0];\n          const estimatedDiameter = (_item$estimated_diame = item.estimated_diameter) === null || _item$estimated_diame === void 0 ? void 0 : _item$estimated_diame.meters;\n          const size = estimatedDiameter ? Math.trunc((estimatedDiameter.estimated_diameter_max + estimatedDiameter.estimated_diameter_min) / 2) : 0;\n          return {\n            name: item.name || \"Unknown\",\n            date: (closeApproach === null || closeApproach === void 0 ? void 0 : closeApproach.close_approach_date) || \"Unknown\",\n            size,\n            distance: {\n              kilometers: parseFloat((closeApproach === null || closeApproach === void 0 ? void 0 : (_closeApproach$miss_d = closeApproach.miss_distance) === null || _closeApproach$miss_d === void 0 ? void 0 : _closeApproach$miss_d.kilometers) || \"0\"),\n              lunar: parseFloat((closeApproach === null || closeApproach === void 0 ? void 0 : (_closeApproach$miss_d2 = closeApproach.miss_distance) === null || _closeApproach$miss_d2 === void 0 ? void 0 : _closeApproach$miss_d2.lunar) || \"0\")\n            },\n            isDangerous: item.is_potentially_hazardous_asteroid || false,\n            id: item.id || Math.random().toString()\n          };\n        });\n        console.log(\"Fetched asteroids:\", parsedAsteroids);\n        setAsteroids(parsedAsteroids);\n      } catch (err) {\n        console.error(\"Failed to fetch asteroids:\", err);\n        setAsteroids([]);\n      }\n    };\n    fetchAsteroids();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.body,\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.filtersWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.showDangerousOnly,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: onlyDangerous,\n          onChange: () => setOnlyDangerous(!onlyDangerous),\n          className: styles.checkBox\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), \"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u043E\\u043F\\u0430\\u0441\\u043D\\u044B\\u0435\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.distanceMode,\n        children: [\"\\u0420\\u0430\\u0441\\u0441\\u0442\\u043E\\u044F\\u043D\\u0438\\u0435:\", /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${styles.distanceChooser} ${context.distanceMode ? styles.active : ''}`,\n          onClick: () => setDistanceMode(true),\n          children: \"\\u0432 \\u043A\\u0438\\u043B\\u043E\\u043C\\u0435\\u0442\\u0440\\u0430\\u0445\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${styles.distanceChooser} ${!context.distanceMode ? styles.active : ''}`,\n          onClick: () => setDistanceMode(false),\n          children: \"\\u0432 \\u041B\\u0414\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: asteroids.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043E\\u0431 \\u0430\\u0441\\u0442\\u0435\\u0440\\u043E\\u0438\\u0434\\u0430\\u0445\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this) : asteroids.filter(item => onlyDangerous ? item.isDangerous : true).map(item => /*#__PURE__*/_jsxDEV(AsteroidCard, {\n        ...item\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 28\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(Asteroids, \"3Bqhx+ELQKjJOXgHzooB7R3rCBs=\");\n_c = Asteroids;\nvar _c;\n$RefreshReg$(_c, \"Asteroids\");","map":{"version":3,"names":["useContext","useEffect","useState","styles","getUserKey","Header","AsteroidCard","AsteroidContext","jsxDEV","_jsxDEV","Asteroids","_s","asteroids","setAsteroids","context","Error","onlyDangerous","setOnlyDangerous","setDistanceMode","fetchAsteroids","url","response","fetch","ok","status","data","json","rawAsteroids","date","near_earth_objects","push","parsedAsteroids","map","item","_item$close_approach_","_item$estimated_diame","_closeApproach$miss_d","_closeApproach$miss_d2","closeApproach","close_approach_data","estimatedDiameter","estimated_diameter","meters","size","Math","trunc","estimated_diameter_max","estimated_diameter_min","name","close_approach_date","distance","kilometers","parseFloat","miss_distance","lunar","isDangerous","is_potentially_hazardous_asteroid","id","random","toString","console","log","err","error","className","body","children","fileName","_jsxFileName","lineNumber","columnNumber","filtersWrapper","showDangerousOnly","type","checked","onChange","checkBox","distanceMode","distanceChooser","active","onClick","length","filter","_c","$RefreshReg$"],"sources":["C:/Users/Max/Desktop/AS/ad/src/Pages/Asteroids.tsx"],"sourcesContent":["\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport styles from './Asteroids.module.css';\r\nimport { getUserKey } from '../utils/getUserKey';\r\nimport { Header } from \"../Components/Header/Header\";\r\nimport { AsteroidCard } from \"../Components/AsteroidCard/AsteroidCard\";\r\nimport { AsteroidContext } from \"../Components/AsteroidCard/AsteroidCardContent/AsteroidContext\";\r\n\r\ntype Asteroid = {\r\n  name: string;\r\n  date: string;\r\n  distance: {\r\n    kilometers: number;\r\n    lunar: number;\r\n  };\r\n  size: number;\r\n  id: string;\r\n  isDangerous: boolean;\r\n};\r\n\r\nexport const Asteroids = () => {\r\n  const [asteroids, setAsteroids] = useState<Asteroid[]>([]);\r\n  \r\n  const context = useContext(AsteroidContext);\r\n  if (!context) {\r\n    throw new Error(\"Asteroids must be used within AsteroidContextProvider\");\r\n  }\r\n\r\n  const { onlyDangerous, setOnlyDangerous, setDistanceMode } = context;\r\n\r\n  useEffect(() => {\r\n    const fetchAsteroids = async () => {\r\n      try { \r\n        const url = `https://api.nasa.gov/neo/rest/v1/feed?api_key=${getUserKey()}`;\r\n        const response = await fetch(url);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! Status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n\r\n        const rawAsteroids: any[] = [];\r\n        for (const date in data.near_earth_objects) {\r\n          rawAsteroids.push(...data.near_earth_objects[date]);\r\n        }\r\n\r\n        const parsedAsteroids: Asteroid[] = rawAsteroids.map((item) => {\r\n          const closeApproach = item.close_approach_data?.[0];\r\n          const estimatedDiameter = item.estimated_diameter?.meters;\r\n\r\n          const size = estimatedDiameter\r\n            ? Math.trunc((estimatedDiameter.estimated_diameter_max + estimatedDiameter.estimated_diameter_min) / 2)\r\n            : 0;\r\n\r\n          return {\r\n            name: item.name || \"Unknown\",\r\n            date: closeApproach?.close_approach_date || \"Unknown\",\r\n            size,\r\n            distance: {\r\n              kilometers: parseFloat(closeApproach?.miss_distance?.kilometers || \"0\"),\r\n              lunar: parseFloat(closeApproach?.miss_distance?.lunar || \"0\"),\r\n            },\r\n            isDangerous: item.is_potentially_hazardous_asteroid || false,\r\n            id: item.id || Math.random().toString(),\r\n          };\r\n        });\r\n\r\n        console.log(\"Fetched asteroids:\", parsedAsteroids);\r\n        setAsteroids(parsedAsteroids);\r\n\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch asteroids:\", err);\r\n        setAsteroids([]);\r\n      }\r\n    };\r\n\r\n    fetchAsteroids();\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.body}>\r\n      <Header />\r\n      <div className={styles.filtersWrapper}>\r\n        <div className={styles.showDangerousOnly}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={onlyDangerous}\r\n            onChange={() => setOnlyDangerous(!onlyDangerous)}\r\n            className={styles.checkBox}\r\n          />\r\n          Только опасные\r\n        </div>\r\n        <div className={styles.distanceMode}>\r\n          Расстояние:\r\n          <button className={`${styles.distanceChooser} ${context.distanceMode ? styles.active : ''}`}\r\n           onClick={() => setDistanceMode(true)}  >в километрах</button>\r\n          <button className={`${styles.distanceChooser} ${!context.distanceMode ? styles.active : ''}`}\r\n           onClick={() => setDistanceMode(false)} >в ЛД</button>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        {asteroids.length === 0 ? (\r\n          <div>Нет данных об астероидах</div>\r\n        ) : (\r\n          asteroids\r\n            .filter((item) => (onlyDangerous ? item.isDangerous : true))\r\n            .map((item) => <AsteroidCard key={item.id} {...item} />)\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}