{"ast":null,"code":"/*export const getUserKey = () => {\r\n \r\n  if (process.env.NODE_ENV === \"development\") {\r\n    return process.env.REACT_APP_API_KEY ?? \"DEMO_KEY\";\r\n  }\r\n  \r\n  let userKey: string | null = null;\r\n\r\n  try {\r\n    userKey = localStorage.getItem(\"API_KEY\");\r\n  } catch {\r\n    return \"DEMO_KEY\";\r\n  }\r\n\r\n  return userKey ?? \"DEMO_KEY\";\r\n};\r\n\r\n\r\n/*export const getUserKey = (): string => {\r\n  // В dev-режиме берём ключ из .env\r\n  if (process.env.NODE_ENV === \"development\") {\r\n    return process.env.REACT_APP_API_KEY ?? \"DEMO_KEY\";\r\n  }\r\n\r\n  // В проде берём из localStorage\r\n  try {\r\n    const key = localStorage.getItem(\"API_KEY\");\r\n    return key && key.length === 40 ? key : \"DEMO_KEY\";\r\n  } catch {\r\n    return \"DEMO_KEY\";\r\n  }\r\n};*/\n\nexport const getUserKey = () => {\n  // В режиме разработки используем .env ключ, как и раньше\n  if (process.env.NODE_ENV === \"development\") {\n    var _process$env$REACT_AP;\n    return (_process$env$REACT_AP = process.env.REACT_APP_API_KEY) !== null && _process$env$REACT_AP !== void 0 ? _process$env$REACT_AP : \"DEMO_KEY\";\n  }\n  try {\n    // Проверяем, подтверждал ли пользователь ключ хотя бы один раз\n    const confirmed = localStorage.getItem(\"API_KEY_CONFIRMED\");\n\n    // Если ключ не подтверждён — считаем пользователя не авторизованным\n    if (confirmed !== \"true\") {\n      return \"DEMO_KEY\";\n    }\n\n    // Считываем ключ из localStorage\n    const userKey = localStorage.getItem(\"API_KEY\");\n\n    // Возвращаем только валидный ключ\n    return userKey && userKey.length === 40 ? userKey : \"DEMO_KEY\";\n  } catch {\n    return \"DEMO_KEY\";\n  }\n};","map":{"version":3,"names":["getUserKey","process","env","NODE_ENV","_process$env$REACT_AP","REACT_APP_API_KEY","confirmed","localStorage","getItem","userKey","length"],"sources":["C:/Users/Max/Desktop/AS/ad/src/utils/getUserKey.ts"],"sourcesContent":["/*export const getUserKey = () => {\r\n \r\n  if (process.env.NODE_ENV === \"development\") {\r\n    return process.env.REACT_APP_API_KEY ?? \"DEMO_KEY\";\r\n  }\r\n  \r\n  let userKey: string | null = null;\r\n\r\n  try {\r\n    userKey = localStorage.getItem(\"API_KEY\");\r\n  } catch {\r\n    return \"DEMO_KEY\";\r\n  }\r\n\r\n  return userKey ?? \"DEMO_KEY\";\r\n};\r\n\r\n\r\n/*export const getUserKey = (): string => {\r\n  // В dev-режиме берём ключ из .env\r\n  if (process.env.NODE_ENV === \"development\") {\r\n    return process.env.REACT_APP_API_KEY ?? \"DEMO_KEY\";\r\n  }\r\n\r\n  // В проде берём из localStorage\r\n  try {\r\n    const key = localStorage.getItem(\"API_KEY\");\r\n    return key && key.length === 40 ? key : \"DEMO_KEY\";\r\n  } catch {\r\n    return \"DEMO_KEY\";\r\n  }\r\n};*/\r\n\r\nexport const getUserKey = (): string => {\r\n  // В режиме разработки используем .env ключ, как и раньше\r\n  if (process.env.NODE_ENV === \"development\") {\r\n    return process.env.REACT_APP_API_KEY ?? \"DEMO_KEY\";\r\n  }\r\n\r\n  try {\r\n    // Проверяем, подтверждал ли пользователь ключ хотя бы один раз\r\n    const confirmed = localStorage.getItem(\"API_KEY_CONFIRMED\");\r\n\r\n    // Если ключ не подтверждён — считаем пользователя не авторизованным\r\n    if (confirmed !== \"true\") {\r\n      return \"DEMO_KEY\";\r\n    }\r\n\r\n    // Считываем ключ из localStorage\r\n    const userKey = localStorage.getItem(\"API_KEY\");\r\n\r\n    // Возвращаем только валидный ключ\r\n    return userKey && userKey.length === 40 ? userKey : \"DEMO_KEY\";\r\n  } catch {\r\n    return \"DEMO_KEY\";\r\n  }\r\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMA,UAAU,GAAGA,CAAA,KAAc;EACtC;EACA,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;IAAA,IAAAC,qBAAA;IAC1C,QAAAA,qBAAA,GAAOH,OAAO,CAACC,GAAG,CAACG,iBAAiB,cAAAD,qBAAA,cAAAA,qBAAA,GAAI,UAAU;EACpD;EAEA,IAAI;IACF;IACA,MAAME,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC;;IAE3D;IACA,IAAIF,SAAS,KAAK,MAAM,EAAE;MACxB,OAAO,UAAU;IACnB;;IAEA;IACA,MAAMG,OAAO,GAAGF,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC;;IAE/C;IACA,OAAOC,OAAO,IAAIA,OAAO,CAACC,MAAM,KAAK,EAAE,GAAGD,OAAO,GAAG,UAAU;EAChE,CAAC,CAAC,MAAM;IACN,OAAO,UAAU;EACnB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}