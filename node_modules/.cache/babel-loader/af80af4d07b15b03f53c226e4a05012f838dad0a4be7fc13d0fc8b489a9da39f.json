{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Max\\\\Desktop\\\\AS\\\\ad\\\\src\\\\Pages\\\\Asteroids.tsx\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from \"react\";\nimport styles from './Asteroids.module.css';\nimport { getUserKey } from '../utils/getUserKey';\nimport { Header } from \"../Components/Header/Header\";\nimport { AsteroidCard } from \"../Components/AsteroidCard/AsteroidCard\";\nimport { AsteroidContext } from \"../Components/AsteroidCard/AsteroidCardContent/AsteroidContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Asteroids = () => {\n  _s();\n  const [asteroids, setAsteroids] = useState([]);\n  const context = useContext(AsteroidContext);\n  if (!context) {\n    throw new Error(\"Asteroids must be used within AsteroidContextProvider\");\n  }\n  const {\n    onlyDangerous,\n    setOnlyDangerous,\n    setDistanceMode\n  } = context;\n  useEffect(() => {\n    const fetchAsteroids = async () => {\n      try {\n        //const response = await fetch(`https://api.nasa.gov/neo/rest/v1/feed?api_key=${getUserKey()}`);\n        const today = new Date().toISOString().split(\"T\")[0];\n        const url = `https://api.nasa.gov/neo/rest/v1/feed?start_date=${today}&end_date=${today}&api_key=${getUserKey()}`;\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        const data = await response.json();\n        const rawAsteroids = [];\n        for (const date in data.near_earth_objects) {\n          rawAsteroids.push(...data.near_earth_objects[date]);\n        }\n        const parsedAsteroids = rawAsteroids.map(item => {\n          var _item$close_approach_, _item$estimated_diame, _closeApproach$miss_d, _closeApproach$miss_d2;\n          const closeApproach = (_item$close_approach_ = item.close_approach_data) === null || _item$close_approach_ === void 0 ? void 0 : _item$close_approach_[0];\n          const estimatedDiameter = (_item$estimated_diame = item.estimated_diameter) === null || _item$estimated_diame === void 0 ? void 0 : _item$estimated_diame.meters;\n          const size = estimatedDiameter ? Math.trunc((estimatedDiameter.estimated_diameter_max + estimatedDiameter.estimated_diameter_min) / 2) : 0;\n          return {\n            name: item.name || \"Unknown\",\n            date: (closeApproach === null || closeApproach === void 0 ? void 0 : closeApproach.close_approach_date) || \"Unknown\",\n            size,\n            distance: {\n              kilometers: parseFloat((closeApproach === null || closeApproach === void 0 ? void 0 : (_closeApproach$miss_d = closeApproach.miss_distance) === null || _closeApproach$miss_d === void 0 ? void 0 : _closeApproach$miss_d.kilometers) || \"0\"),\n              lunar: parseFloat((closeApproach === null || closeApproach === void 0 ? void 0 : (_closeApproach$miss_d2 = closeApproach.miss_distance) === null || _closeApproach$miss_d2 === void 0 ? void 0 : _closeApproach$miss_d2.lunar) || \"0\")\n            },\n            isDangerous: item.is_potentially_hazardous_asteroid || false,\n            id: item.id || Math.random().toString()\n          };\n        });\n        setAsteroids(parsedAsteroids);\n      } catch (err) {\n        console.error(\"Failed to fetch asteroids:\", err);\n        setAsteroids([]);\n      }\n    };\n    fetchAsteroids();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.body,\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.filtersWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.showDangerousOnly,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: onlyDangerous,\n          onChange: () => setOnlyDangerous(!onlyDangerous),\n          className: styles.checkBox\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 7\n        }, this), \"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u043E\\u043F\\u0430\\u0441\\u043D\\u044B\\u0435\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.distanceMode,\n        children: [\"\\u0420\\u0430\\u0441\\u0441\\u0442\\u043E\\u044F\\u043D\\u0438\\u0435:\", /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.distanceChooser,\n          onClick: () => setDistanceMode(true),\n          children: \"\\u0432 \\u043A\\u0438\\u043B\\u043E\\u043C\\u0435\\u0442\\u0440\\u0430\\u0445\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.distanceChooser,\n          onClick: () => setDistanceMode(false),\n          children: \"\\u0432 \\u041B\\u0414\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.asteroidsList,\n      children: asteroids.filter(item => onlyDangerous ? item.isDangerous : true).map(item => /*#__PURE__*/_jsxDEV(AsteroidCard, {\n        ...item\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 24\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(Asteroids, \"3Bqhx+ELQKjJOXgHzooB7R3rCBs=\");\n_c = Asteroids;\nvar _c;\n$RefreshReg$(_c, \"Asteroids\");","map":{"version":3,"names":["useContext","useEffect","useState","styles","getUserKey","Header","AsteroidCard","AsteroidContext","jsxDEV","_jsxDEV","Asteroids","_s","asteroids","setAsteroids","context","Error","onlyDangerous","setOnlyDangerous","setDistanceMode","fetchAsteroids","today","Date","toISOString","split","url","response","fetch","ok","status","data","json","rawAsteroids","date","near_earth_objects","push","parsedAsteroids","map","item","_item$close_approach_","_item$estimated_diame","_closeApproach$miss_d","_closeApproach$miss_d2","closeApproach","close_approach_data","estimatedDiameter","estimated_diameter","meters","size","Math","trunc","estimated_diameter_max","estimated_diameter_min","name","close_approach_date","distance","kilometers","parseFloat","miss_distance","lunar","isDangerous","is_potentially_hazardous_asteroid","id","random","toString","err","console","error","className","body","children","fileName","_jsxFileName","lineNumber","columnNumber","filtersWrapper","showDangerousOnly","type","checked","onChange","checkBox","distanceMode","distanceChooser","onClick","asteroidsList","filter","_c","$RefreshReg$"],"sources":["C:/Users/Max/Desktop/AS/ad/src/Pages/Asteroids.tsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport styles from './Asteroids.module.css';\r\nimport { getUserKey } from '../utils/getUserKey';\r\nimport { Header } from \"../Components/Header/Header\";\r\nimport { AsteroidCard } from \"../Components/AsteroidCard/AsteroidCard\";\r\nimport { AsteroidContext } from \"../Components/AsteroidCard/AsteroidCardContent/AsteroidContext\";\r\n\r\ntype Asteroid = {\r\n  name: string;\r\n  date: string;\r\n  distance: {\r\n    kilometers: number;\r\n    lunar: number;\r\n  };\r\n  size: number;\r\n  id: string;\r\n  isDangerous: boolean;\r\n};\r\n\r\nexport const Asteroids = () => {\r\n  const [asteroids, setAsteroids] = useState<Asteroid[]>([]);\r\n  \r\n  const context = useContext(AsteroidContext);\r\n  if (!context) {\r\n    throw new Error(\"Asteroids must be used within AsteroidContextProvider\");\r\n  }\r\n\r\n  const { onlyDangerous, setOnlyDangerous, setDistanceMode } = context;\r\n\r\n  useEffect(() => {\r\n    const fetchAsteroids = async () => {\r\n      try {\r\n        //const response = await fetch(`https://api.nasa.gov/neo/rest/v1/feed?api_key=${getUserKey()}`);\r\n        const today = new Date().toISOString().split(\"T\")[0];\r\n        const url = `https://api.nasa.gov/neo/rest/v1/feed?start_date=${today}&end_date=${today}&api_key=${getUserKey()}`;\r\n        const response = await fetch(url);\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! Status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        const rawAsteroids: any[] = [];\r\n\r\n        for (const date in data.near_earth_objects) {\r\n          rawAsteroids.push(...data.near_earth_objects[date]);\r\n        }\r\n\r\n        const parsedAsteroids: Asteroid[] = rawAsteroids.map((item) => {\r\n          const closeApproach = item.close_approach_data?.[0];\r\n          const estimatedDiameter = item.estimated_diameter?.meters;\r\n\r\n          const size = estimatedDiameter ? Math.trunc((estimatedDiameter.estimated_diameter_max + estimatedDiameter.estimated_diameter_min) / 2) : 0;\r\n\r\n          return {\r\n            name: item.name || \"Unknown\",\r\n            date: closeApproach?.close_approach_date || \"Unknown\",\r\n            size,\r\n            distance: {\r\n              kilometers: parseFloat(closeApproach?.miss_distance?.kilometers || \"0\"),\r\n              lunar: parseFloat(closeApproach?.miss_distance?.lunar || \"0\"),\r\n            },\r\n            isDangerous: item.is_potentially_hazardous_asteroid || false,\r\n            id: item.id || Math.random().toString(),\r\n          };\r\n        });\r\n\r\n        setAsteroids(parsedAsteroids);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch asteroids:\", err);\r\n        setAsteroids([]);\r\n      } \r\n    };\r\n\r\n    fetchAsteroids();\r\n  }, []);\r\n\r\n\r\n\r\n  return (\r\n    <div className={styles.body}>\r\n  <Header />\r\n  <div className={styles.filtersWrapper}>\r\n    <div className={styles.showDangerousOnly}>\r\n      <input type=\"checkbox\" checked={onlyDangerous} onChange={() => setOnlyDangerous(!onlyDangerous)} className={styles.checkBox} />\r\n      Только опасные\r\n    </div>\r\n    <div className={styles.distanceMode}>\r\n      Расстояние:\r\n      <button className={styles.distanceChooser} onClick={() => setDistanceMode(true)}>в километрах</button>\r\n      <button className={styles.distanceChooser} onClick={() => setDistanceMode(false)}>в ЛД</button>\r\n    </div>\r\n  </div>\r\n  <div className={styles.asteroidsList}>\r\n    {\r\n      asteroids\r\n        .filter((item) => (onlyDangerous ? item.isDangerous : true))\r\n        .map((item) => <AsteroidCard key={item.id} {...item} />)\r\n    }\r\n  </div>\r\n</div>\r\n  );\r\n};\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}