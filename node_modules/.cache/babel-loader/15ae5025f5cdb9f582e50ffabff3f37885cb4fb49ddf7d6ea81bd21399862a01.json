{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Max\\\\Desktop\\\\AS\\\\ad\\\\src\\\\Pages\\\\Asteroids.tsx\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from \"react\";\nimport styles from './Asteroids.module.css';\nimport { getUserKey } from '../utils/getUserKey';\nimport { Header } from \"../Components/Header/Header\";\nimport { AsteroidCard } from \"../Components/AsteroidCard/AsteroidCard\";\nimport { AsteroidContext } from \"../Components/AsteroidCard/AsteroidCardContent/AsteroidContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Asteroids = () => {\n  _s();\n  const [asteroids, setAsteroids] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const context = useContext(AsteroidContext);\n  if (!context) {\n    throw new Error(\"Asteroids must be used within AsteroidContextProvider\");\n  }\n  const {\n    onlyDangerous,\n    setOnlyDangerous,\n    setDistanceMode\n  } = context;\n  useEffect(() => {\n    const fetchAsteroids = async () => {\n      try {\n        const response = await fetch(`https://api.nasa.gov/neo/rest/v1/feed?start_date=2005-01-01&end_date=2005-01-07&api_key=${getUserKey()}`);\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        const data = await response.json();\n        const rawAsteroids = [];\n        for (const date in data.near_earth_objects) {\n          rawAsteroids.push(...data.near_earth_objects[date]);\n        }\n        const parsedAsteroids = rawAsteroids.map(item => {\n          var _item$close_approach_, _item$estimated_diame, _closeApproach$miss_d, _closeApproach$miss_d2;\n          const closeApproach = (_item$close_approach_ = item.close_approach_data) === null || _item$close_approach_ === void 0 ? void 0 : _item$close_approach_[0];\n          const estimatedDiameter = (_item$estimated_diame = item.estimated_diameter) === null || _item$estimated_diame === void 0 ? void 0 : _item$estimated_diame.meters;\n          const size = estimatedDiameter ? Math.trunc((estimatedDiameter.estimated_diameter_max + estimatedDiameter.estimated_diameter_min) / 2) : 0;\n          return {\n            name: item.name || \"Unknown\",\n            date: (closeApproach === null || closeApproach === void 0 ? void 0 : closeApproach.close_approach_date) || \"Unknown\",\n            size,\n            distance: {\n              kilometers: parseFloat((closeApproach === null || closeApproach === void 0 ? void 0 : (_closeApproach$miss_d = closeApproach.miss_distance) === null || _closeApproach$miss_d === void 0 ? void 0 : _closeApproach$miss_d.kilometers) || \"0\"),\n              lunar: parseFloat((closeApproach === null || closeApproach === void 0 ? void 0 : (_closeApproach$miss_d2 = closeApproach.miss_distance) === null || _closeApproach$miss_d2 === void 0 ? void 0 : _closeApproach$miss_d2.lunar) || \"0\")\n            },\n            isDangerous: item.is_potentially_hazardous_asteroid || false,\n            id: item.id || Math.random().toString()\n          };\n        });\n        setAsteroids(parsedAsteroids);\n      } catch (err) {\n        console.error(\"Failed to fetch asteroids:\", err);\n        setAsteroids([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAsteroids();\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.loading,\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.showDangerousOnly,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        checked: onlyDangerous,\n        onChange: () => setOnlyDangerous(!onlyDangerous)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), \"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u043E\\u043F\\u0430\\u0441\\u043D\\u044B\\u0435\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.distanceMode,\n      children: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: [\"\\u0420\\u0430\\u0441\\u0441\\u0442\\u043E\\u044F\\u043D\\u0438\\u0435\", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setDistanceMode(true),\n          children: \"\\u0432 \\u043A\\u0438\\u043B\\u043E\\u043C\\u0435\\u0442\\u0440\\u0430\\u0445\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), \",\", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setDistanceMode(false),\n          children: \"\\u0432 \\u0434\\u0438\\u0441\\u0442\\u0430\\u043D\\u0446\\u0438\\u044F\\u0445 \\u0434\\u043E \\u043B\\u0443\\u043D\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), asteroids.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.noData,\n      children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043E\\u0431 \\u0430\\u0441\\u0442\\u0435\\u0440\\u043E\\u0438\\u0434\\u0430\\u0445\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this) : asteroids.filter(item => onlyDangerous ? item.isDangerous : true).map(item => /*#__PURE__*/_jsxDEV(AsteroidCard, {\n      ...item\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 28\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(Asteroids, \"TbF5ztPrdJfvdISUcTA0TFEJ16c=\");\n_c = Asteroids;\nvar _c;\n$RefreshReg$(_c, \"Asteroids\");","map":{"version":3,"names":["useContext","useEffect","useState","styles","getUserKey","Header","AsteroidCard","AsteroidContext","jsxDEV","_jsxDEV","Asteroids","_s","asteroids","setAsteroids","loading","setLoading","context","Error","onlyDangerous","setOnlyDangerous","setDistanceMode","fetchAsteroids","response","fetch","ok","status","data","json","rawAsteroids","date","near_earth_objects","push","parsedAsteroids","map","item","_item$close_approach_","_item$estimated_diame","_closeApproach$miss_d","_closeApproach$miss_d2","closeApproach","close_approach_data","estimatedDiameter","estimated_diameter","meters","size","Math","trunc","estimated_diameter_max","estimated_diameter_min","name","close_approach_date","distance","kilometers","parseFloat","miss_distance","lunar","isDangerous","is_potentially_hazardous_asteroid","id","random","toString","err","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","showDangerousOnly","type","checked","onChange","distanceMode","onClick","length","noData","filter","_c","$RefreshReg$"],"sources":["C:/Users/Max/Desktop/AS/ad/src/Pages/Asteroids.tsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport styles from './Asteroids.module.css';\r\nimport { getUserKey } from '../utils/getUserKey';\r\nimport { Header } from \"../Components/Header/Header\";\r\nimport { AsteroidCard } from \"../Components/AsteroidCard/AsteroidCard\";\r\nimport { AsteroidContext } from \"../Components/AsteroidCard/AsteroidCardContent/AsteroidContext\";\r\n\r\ntype Asteroid = {\r\n  name: string;\r\n  date: string;\r\n  distance: {\r\n    kilometers: number;\r\n    lunar: number;\r\n  };\r\n  size: number;\r\n  id: string;\r\n  isDangerous: boolean;\r\n};\r\n\r\nexport const Asteroids = () => {\r\n  const [asteroids, setAsteroids] = useState<Asteroid[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const context = useContext(AsteroidContext);\r\n  if (!context) {\r\n    throw new Error(\"Asteroids must be used within AsteroidContextProvider\");\r\n  }\r\n\r\n  const { onlyDangerous, setOnlyDangerous, setDistanceMode } = context;\r\n\r\n  useEffect(() => {\r\n    const fetchAsteroids = async () => {\r\n      try {\r\n        const response = await fetch(`https://api.nasa.gov/neo/rest/v1/feed?start_date=2005-01-01&end_date=2005-01-07&api_key=${getUserKey()}`);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! Status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        const rawAsteroids: any[] = [];\r\n\r\n        for (const date in data.near_earth_objects) {\r\n          rawAsteroids.push(...data.near_earth_objects[date]);\r\n        }\r\n\r\n        const parsedAsteroids: Asteroid[] = rawAsteroids.map((item) => {\r\n          const closeApproach = item.close_approach_data?.[0];\r\n          const estimatedDiameter = item.estimated_diameter?.meters;\r\n\r\n          const size = estimatedDiameter ? Math.trunc((estimatedDiameter.estimated_diameter_max + estimatedDiameter.estimated_diameter_min) / 2) : 0;\r\n\r\n          return {\r\n            name: item.name || \"Unknown\",\r\n            date: closeApproach?.close_approach_date || \"Unknown\",\r\n            size,\r\n            distance: {\r\n              kilometers: parseFloat(closeApproach?.miss_distance?.kilometers || \"0\"),\r\n              lunar: parseFloat(closeApproach?.miss_distance?.lunar || \"0\"),\r\n            },\r\n            isDangerous: item.is_potentially_hazardous_asteroid || false,\r\n            id: item.id || Math.random().toString(),\r\n          };\r\n        });\r\n\r\n        setAsteroids(parsedAsteroids);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch asteroids:\", err);\r\n        setAsteroids([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAsteroids();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <div className={styles.loading}>Загрузка...</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <div className={styles.showDangerousOnly}>\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={onlyDangerous}\r\n          onChange={() => setOnlyDangerous(!onlyDangerous)}\r\n        />\r\n        Только опасные\r\n      </div>\r\n      <div className={styles.distanceMode}>\r\n        <center>\r\n          Расстояние\r\n          <button onClick={() => setDistanceMode(true)}>в километрах</button>,\r\n          <button onClick={() => setDistanceMode(false)}>в дистанциях до луны</button>\r\n        </center>\r\n      </div>\r\n      {asteroids.length === 0 ? (\r\n        <div className={styles.noData}>Нет данных об астероидах</div>\r\n      ) : (\r\n        asteroids\r\n          .filter((item) => (onlyDangerous ? item.isDangerous : true))\r\n          .map((item) => ( <AsteroidCard key={item.id} {...item} /> ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}